{"version":3,"file":"dx-grid-core.umd.js","sources":["../src/plugins/grid-core/computeds.js","../src/plugins/sorting-state/reducers.js","../src/plugins/sorting-state/helpers.js","../src/utils/merge-sort.js","../src/utils/hierarchical-data.js","../src/plugins/local-sorting/computeds.js","../src/plugins/filtering-state/reducers.js","../src/plugins/filtering-state/helpers.js","../src/plugins/local-filtering/computeds.js","../src/plugins/grouping-state/constants.js","../src/plugins/grouping-state/reducers.js","../src/plugins/grouping-state/computeds.js","../src/plugins/local-grouping/constants.js","../src/plugins/local-grouping/computeds.js","../src/plugins/custom-grouping/computeds.js","../src/plugins/grouping-panel/helpers.js","../src/plugins/paging-state/reducers.js","../src/plugins/local-paging/computeds.js","../src/plugins/paging-panel/helpers.js","../src/plugins/selection-state/reducers.js","../src/plugins/selection-state/computeds.js","../src/plugins/editing-state/reducers.js","../src/plugins/editing-state/computeds.js","../src/plugins/editing-state/helpers.js","../src/plugins/table-column-reordering/constants.js","../src/plugins/table-column-reordering/reducers.js","../src/plugins/table-view/constants.js","../src/plugins/table-column-reordering/computeds.js","../src/plugins/table-column-resizing/computeds.js","../src/plugins/table-column-resizing/reducers.js","../src/plugins/table-edit-column/constants.js","../src/plugins/table-edit-row/constants.js","../src/plugins/table-header-row/constants.js","../src/plugins/table-edit-column/helpers.js","../src/plugins/table-edit-column/computeds.js","../src/plugins/table-edit-row/helpers.js","../src/plugins/table-edit-row/computeds.js","../src/plugins/table-filter-row/constants.js","../src/plugins/table-filter-row/helpers.js","../src/plugins/table-filter-row/computeds.js","../src/plugins/table-group-row/constants.js","../src/plugins/table-group-row/helpers.js","../src/plugins/table-group-row/computeds.js","../src/plugins/table-header-row/helpers.js","../src/plugins/table-header-row/computeds.js","../src/plugins/table-row-detail/constants.js","../src/plugins/table-row-detail/helpers.js","../src/plugins/table-row-detail/reducers.js","../src/plugins/table-row-detail/computeds.js","../src/plugins/table-selection/constants.js","../src/plugins/table-selection/helpers.js","../src/plugins/table-selection/computeds.js","../src/plugins/table-view/helpers.js","../src/plugins/table-view/computeds.js","../src/plugins/table-column-visibility/computeds.js","../src/column-chooser/computeds.js","../src/column-chooser/reducers.js","../src/utils/column-geometries.js","../src/utils/table.js","../src/utils/group-panel.js","../src/utils/messages-formatter.js"],"sourcesContent":["export const rowIdGetter = (getRowId, rows) => {\n  if (!getRowId) {\n    const map = new Map(rows.map((row, rowIndex) => [row, rowIndex]));\n    return row => map.get(row);\n  }\n  return getRowId;\n};\n\nexport const cellValueGetter = (getCellValue, columns) => {\n  if (getCellValue) {\n    return getCellValue;\n  }\n\n  let useFastAccessor = true;\n  const map = columns.reduce((acc, column) => {\n    if (column.getCellValue) {\n      useFastAccessor = false;\n      acc[column.name] = column.getCellValue;\n    }\n    return acc;\n  }, {});\n\n  return useFastAccessor ?\n    (row, columnName) => row[columnName] :\n    (row, columnName) => (map[columnName] ? map[columnName](row, columnName) : row[columnName]);\n};\n","export const setColumnSorting = (state, {\n  columnName, direction, keepOther, cancel, sortIndex,\n}) => {\n  const { sorting } = state;\n\n  let nextSorting = [];\n  if (keepOther === true) {\n    nextSorting = Array.from(sorting).slice();\n  }\n  if (Array.isArray(keepOther)) {\n    nextSorting = Array.from(sorting)\n      .filter(columnSorting => keepOther.indexOf(columnSorting.columnName) > -1);\n  }\n\n  const columnSortingIndex = sorting\n    .findIndex(columnSorting => columnSorting.columnName === columnName);\n  const columnSorting = sorting[columnSortingIndex];\n  const newColumnSorting = {\n    columnName,\n    direction: direction ||\n      (!columnSorting || columnSorting.direction === 'desc' ? 'asc' : 'desc'),\n  };\n\n  if (columnSortingIndex > -1) {\n    nextSorting.splice(columnSortingIndex, 1);\n  }\n\n  if (!cancel) {\n    const newIndexFallback = columnSortingIndex > -1 ? columnSortingIndex : nextSorting.length;\n    const newIndex = sortIndex !== undefined ? sortIndex : newIndexFallback;\n    nextSorting.splice(newIndex, 0, newColumnSorting);\n  }\n\n  return {\n    sorting: nextSorting,\n  };\n};\n","export const getColumnSortingDirection = (sorting, columnName) => {\n  const columnSorting = sorting.filter(s => s.columnName === columnName)[0];\n  return columnSorting ? columnSorting.direction : null;\n};\n","/* eslint-disable no-plusplus, no-param-reassign, no-use-before-define, no-constant-condition */\n\nconst merge = (array, auxiliary, lo, mid, hi, compare) => {\n  let i = lo;\n  let j = mid + 1;\n  let k = lo;\n  while (true) {\n    const cmp = compare(array[i], array[j]);\n    if (cmp <= 0) {\n      auxiliary[k++] = array[i++];\n      if (i > mid) {\n        do {\n          auxiliary[k++] = array[j++];\n        } while (j <= hi);\n        break;\n      }\n    } else {\n      auxiliary[k++] = array[j++];\n      if (j > hi) {\n        do {\n          auxiliary[k++] = array[i++];\n        } while (i <= mid);\n        break;\n      }\n    }\n  }\n};\n\nconst sortArrayToAuxiliary = (array, auxiliary, lo, hi, compare) => {\n  if (hi < lo) return;\n  if (hi === lo) {\n    auxiliary[lo] = array[lo];\n    return;\n  }\n  const mid = Math.floor(lo + ((hi - lo) / 2));\n  sortAuxiliaryToArray(array, auxiliary, lo, mid, compare);\n  sortAuxiliaryToArray(array, auxiliary, mid + 1, hi, compare);\n  merge(array, auxiliary, lo, mid, hi, compare);\n};\n\nconst sortAuxiliaryToArray = (array, auxiliary, lo, hi, compare) => {\n  if (hi <= lo) return;\n  const mid = Math.floor(lo + ((hi - lo) / 2));\n  sortArrayToAuxiliary(array, auxiliary, lo, mid, compare);\n  sortArrayToAuxiliary(array, auxiliary, mid + 1, hi, compare);\n  merge(auxiliary, array, lo, mid, hi, compare);\n};\n\nexport default (\n  array,\n  compare = (a, b) => {\n    if (a < b) return -1;\n    if (a > b) return 1;\n    return 0;\n  },\n) => {\n  const result = array.slice();\n  const auxiliary = array.slice();\n  sortAuxiliaryToArray(result, auxiliary, 0, result.length - 1, compare);\n  return result;\n};\n","export const NODE_CHECK = Symbol('node');\n\nexport const rowsToTree = (rows, getRowLevelKey) => {\n  if (!rows.length) return rows;\n\n  const levels = [{ children: [] }];\n\n  rows.forEach((row) => {\n    const levelKey = getRowLevelKey(row);\n    if (levelKey) {\n      const levelIndex = levels.slice(1)\n        .findIndex(level => getRowLevelKey(level.root) === levelKey) + 1;\n      if (levelIndex > 0) {\n        levels.splice(levelIndex, levels.length - levelIndex);\n      }\n      const node = { [NODE_CHECK]: true, root: row, children: [] };\n      levels[levels.length - 1].children.push(node);\n      levels.push(node);\n    } else {\n      levels[levels.length - 1].children.push(row);\n    }\n  });\n\n  return levels[0].children;\n};\n\nexport const treeToRows = (tree, rows = []) => {\n  if (!tree.length) return tree;\n  return tree.reduce(\n    (acc, node) => {\n      if (node[NODE_CHECK]) {\n        acc.push(node.root);\n        treeToRows(node.children, rows);\n      } else {\n        acc.push(node);\n      }\n      return acc;\n    },\n    rows,\n  );\n};\n","import mergeSort from '../../utils/merge-sort';\nimport { NODE_CHECK, rowsToTree, treeToRows } from '../../utils/hierarchical-data';\n\nconst defaultCompare = (a, b) => {\n  if (a < b) return -1;\n  if (a > b) return 1;\n  return 0;\n};\n\nconst createCompare = (sorting, getColumnCompare, getComparableValue) =>\n  Array.from(sorting)\n    .reverse()\n    .reduce(\n      (prevCompare, columnSorting) => {\n        const { columnName } = columnSorting;\n        const inverse = columnSorting.direction === 'desc';\n        const columnCompare = (getColumnCompare && getColumnCompare(columnName)) || defaultCompare;\n\n        return (aRow, bRow) => {\n          const a = getComparableValue(aRow, columnName);\n          const b = getComparableValue(bRow, columnName);\n          const result = columnCompare(a, b);\n\n          if (result !== 0) {\n            return inverse ? -result : result;\n          }\n          return prevCompare(aRow, bRow);\n        };\n      },\n      () => 0,\n    );\n\nconst sortTree = (tree, compare) => {\n  const sortedTree = tree.map((node) => {\n    if (node[NODE_CHECK]) {\n      return {\n        ...node,\n        children: sortTree(node.children, compare),\n      };\n    }\n    return node;\n  });\n\n  return mergeSort(sortedTree, (a, b) =>\n    compare(a[NODE_CHECK] ? a.root : a, b[NODE_CHECK] ? b.root : b));\n};\n\nconst sortHierarchicalRows = (rows, compare, getRowLevelKey) => {\n  const tree = rowsToTree(rows, getRowLevelKey);\n\n  const sortedTree = sortTree(tree, compare);\n\n  return treeToRows(sortedTree);\n};\n\nexport const sortedRows = (\n  rows,\n  sorting,\n  getCellValue,\n  getColumnCompare,\n  isGroupRow,\n  getRowLevelKey,\n) => {\n  if (!sorting.length || !rows.length) return rows;\n\n  if (!getRowLevelKey) {\n    const compare = createCompare(sorting, getColumnCompare, getCellValue);\n    return mergeSort(Array.from(rows), compare);\n  }\n\n  const compare = createCompare(sorting, getColumnCompare, (row, columnName) => {\n    if (isGroupRow(row)) {\n      if (row.groupedBy === columnName) {\n        return row.value;\n      }\n      return undefined;\n    }\n    return getCellValue(row, columnName);\n  });\n  return sortHierarchicalRows(\n    rows,\n    compare,\n    getRowLevelKey,\n  );\n};\n","export const setColumnFilter = (filters, { columnName, config }) => {\n  const filterIndex = filters.findIndex(f => f.columnName === columnName);\n  const nextState = Array.from(filters);\n\n  if (config) {\n    const filter = { columnName, ...config };\n    if (filterIndex > -1) {\n      nextState.splice(filterIndex, 1, filter);\n    } else {\n      nextState.push(filter);\n    }\n  } else {\n    nextState.splice(filterIndex, 1);\n  }\n\n  return nextState;\n};\n","export const getColumnFilterConfig = (filters, columnName) => {\n  if (!filters.length) { return null; }\n\n  const filter = filters.filter(s => s.columnName === columnName)[0];\n  if (!filter) return null;\n\n  const { columnName: _, ...config } = filter;\n  return config;\n};\n","import { NODE_CHECK, rowsToTree, treeToRows } from '../../utils/hierarchical-data';\n\nconst toLowerCase = value => String(value).toLowerCase();\n\nconst defaultPredicate = (value, filter) =>\n  toLowerCase(value).indexOf(toLowerCase(filter.value)) > -1;\n\nconst filterTree = (tree, predicate) =>\n  tree.reduce(\n    (acc, node) => {\n      if (node[NODE_CHECK]) {\n        const filteredChildren = filterTree(node.children, predicate);\n        if (filteredChildren.length > 0) {\n          acc.push({\n            ...node,\n            children: filteredChildren,\n          });\n          return acc;\n        } else if (predicate(node.root)) {\n          acc.push(node.root);\n          return acc;\n        }\n      }\n\n      if (predicate(node)) {\n        acc.push(node);\n        return acc;\n      }\n\n      return acc;\n    },\n    [],\n  );\n\nconst filterHierarchicalRows = (rows, predicate, getRowLevelKey, isGroupRow) => {\n  const tree = rowsToTree(rows, getRowLevelKey);\n\n  const filteredTree = filterTree(tree, (row) => {\n    if (isGroupRow(row)) {\n      if (row.collapsedRows) {\n        return row.collapsedRows.findIndex(predicate) > -1;\n      }\n      return false;\n    }\n    return predicate(row);\n  });\n\n  return treeToRows(filteredTree);\n};\n\nexport const filteredRows = (\n  rows,\n  filters,\n  getCellValue,\n  getColumnPredicate,\n  isGroupRow,\n  getRowLevelKey,\n) => {\n  if (!filters.length || !rows.length) return rows;\n\n  const predicate = filters.reduce(\n    (prevPredicate, filter) => {\n      const { columnName, ...filterConfig } = filter;\n      const customPredicate = getColumnPredicate && getColumnPredicate(columnName);\n      const columnPredicate = customPredicate || defaultPredicate;\n\n      return (row) => {\n        const result = columnPredicate(getCellValue(row, columnName), filterConfig, row);\n        return result && prevPredicate(row);\n      };\n    },\n    () => true,\n  );\n\n  if (!getRowLevelKey) {\n    return rows.filter(predicate);\n  }\n\n  return filterHierarchicalRows(rows, predicate, getRowLevelKey, isGroupRow);\n};\n","export const GROUP_KEY_SEPARATOR = '|';\n","import { GROUP_KEY_SEPARATOR } from './constants';\n\nexport const groupByColumn = (state, { columnName, groupIndex }) => {\n  const grouping = Array.from(state.grouping);\n  const groupingIndex = grouping.findIndex(g => g.columnName === columnName);\n  let targetIndex = groupIndex;\n\n  if (groupingIndex > -1) {\n    grouping.splice(groupingIndex, 1);\n  } else if (groupIndex === undefined) {\n    targetIndex = grouping.length;\n  }\n\n  if (targetIndex > -1) {\n    grouping.splice(targetIndex, 0, {\n      columnName,\n    });\n  }\n\n\n  const ungroupedColumnIndex = state.grouping.findIndex((group, index) =>\n    !grouping[index] || group.columnName !== grouping[index].columnName);\n  if (ungroupedColumnIndex === -1) {\n    return {\n      grouping,\n    };\n  }\n\n  const filteredExpandedGroups = state.expandedGroups.filter(group =>\n    group.split(GROUP_KEY_SEPARATOR).length <= ungroupedColumnIndex);\n  if (filteredExpandedGroups.length === state.expandedGroups.length) {\n    return {\n      grouping,\n    };\n  }\n\n  return {\n    grouping,\n    expandedGroups: filteredExpandedGroups,\n  };\n};\n\nexport const toggleExpandedGroups = (state, { groupKey }) => {\n  const expandedGroups = Array.from(state.expandedGroups);\n  const groupKeyIndex = expandedGroups.indexOf(groupKey);\n\n  if (groupKeyIndex > -1) {\n    expandedGroups.splice(groupKeyIndex, 1);\n  } else {\n    expandedGroups.push(groupKey);\n  }\n\n  return {\n    expandedGroups,\n  };\n};\n\nexport const draftGroupingChange = (state, { columnName, groupIndex }) =>\n  ({ groupingChange: { columnName, groupIndex } });\n\nexport const cancelGroupingChange = () => ({ groupingChange: null });\n","export const draftGrouping = (grouping, groupingChange) => {\n  if (!groupingChange) return grouping;\n\n  const { columnName, groupIndex } = groupingChange;\n  let result = Array.from(grouping);\n\n  if (groupIndex !== -1) {\n    result = result.filter(g => g.columnName !== columnName);\n    result.splice(groupIndex, 0, {\n      columnName,\n      draft: true,\n      mode: grouping.length > result.length ? 'reorder' : 'add',\n    });\n  } else {\n    result = result.map(g => (g.columnName === columnName\n      ? { columnName, draft: true, mode: 'remove' }\n      : g));\n  }\n\n  return result;\n};\n","export const GRID_GROUP_TYPE = 'group';\nexport const GRID_GROUP_CHECK = Symbol(`${GRID_GROUP_TYPE}_check`);\nexport const GRID_GROUP_LEVEL_KEY = Symbol(`${GRID_GROUP_TYPE}_levelKey`);\n\n","import {\n  GROUP_KEY_SEPARATOR,\n} from '../grouping-state/constants';\nimport {\n  GRID_GROUP_TYPE,\n  GRID_GROUP_CHECK,\n  GRID_GROUP_LEVEL_KEY,\n} from './constants';\n\nexport const groupRowChecker = row => row[GRID_GROUP_CHECK];\n\nexport const groupRowLevelKeyGetter = row => row[GRID_GROUP_LEVEL_KEY];\n\nconst defaultColumnIdentity = value => ({\n  key: String(value),\n  value,\n});\n\nexport const groupedRows = (\n  rows,\n  grouping,\n  getCellValue,\n  getColumnIdentity,\n  keyPrefix = '',\n) => {\n  if (!grouping.length) return rows;\n\n  const { columnName } = grouping[0];\n  const groupIdentity = (getColumnIdentity && getColumnIdentity(columnName))\n    || defaultColumnIdentity;\n  const groups = rows\n    .reduce((acc, row) => {\n      const { key, value = key } = groupIdentity(getCellValue(row, columnName), row);\n      const sameKeyItems = acc.get(key);\n\n      if (!sameKeyItems) {\n        acc.set(key, [value, key, [row]]);\n      } else {\n        sameKeyItems[2].push(row);\n      }\n      return acc;\n    }, new Map());\n\n  const groupedBy = grouping[0].columnName;\n  const nestedGrouping = grouping.slice(1);\n  return [...groups.values()]\n    .reduce((acc, [value, key, items]) => {\n      const compoundKey = `${keyPrefix}${key}`;\n      acc.push({\n        [GRID_GROUP_CHECK]: true,\n        [GRID_GROUP_LEVEL_KEY]: `${GRID_GROUP_TYPE}_${groupedBy}`,\n        groupedBy,\n        compoundKey,\n        key,\n        value,\n      });\n      acc.push(...groupedRows(\n        items,\n        nestedGrouping,\n        getCellValue,\n        getColumnIdentity,\n        `${compoundKey}${GROUP_KEY_SEPARATOR}`,\n      ));\n      return acc;\n    }, []);\n};\n\nexport const expandedGroupRows = (rows, grouping, expandedGroups) => {\n  if (!grouping.length) return rows;\n\n  const groupingColumnNames = grouping.map(columnGrouping => columnGrouping.columnName);\n  let currentGroupExpanded = true;\n  let currentGroupLevel = 0;\n\n  return rows.reduce((acc, row) => {\n    if (!row[GRID_GROUP_CHECK]) {\n      if (currentGroupExpanded) {\n        acc.push(row);\n      } else {\n        acc[acc.length - 1].collapsedRows.push(row);\n      }\n      return acc;\n    }\n\n    const groupLevel = groupingColumnNames.indexOf(row.groupedBy);\n    if (groupLevel > currentGroupLevel && !currentGroupExpanded) {\n      return acc;\n    }\n\n    currentGroupExpanded = expandedGroups.has(row.compoundKey);\n    currentGroupLevel = groupLevel;\n\n    if (currentGroupExpanded) {\n      acc.push(row);\n    } else {\n      acc.push({\n        ...row,\n        collapsedRows: [],\n      });\n    }\n\n    return acc;\n  }, []);\n};\n","import {\n  GROUP_KEY_SEPARATOR,\n} from '../grouping-state/constants';\nimport {\n  GRID_GROUP_TYPE,\n  GRID_GROUP_CHECK,\n  GRID_GROUP_LEVEL_KEY,\n} from '../local-grouping/constants';\n\nexport const customGroupedRows = (\n  currentRows,\n  grouping,\n  getChildGroups,\n  rootRows = currentRows,\n  keyPrefix = '',\n) => {\n  if (!currentRows || !currentRows.length) return [];\n  if (!grouping.length) return currentRows;\n\n  const groupedBy = grouping[0].columnName;\n  const nestedGrouping = grouping.slice(1);\n  return getChildGroups(currentRows, grouping[0], rootRows)\n    .reduce((acc, { key, value = key, childRows }) => {\n      const compoundKey = `${keyPrefix}${key}`;\n      acc.push({\n        [GRID_GROUP_CHECK]: true,\n        [GRID_GROUP_LEVEL_KEY]: `${GRID_GROUP_TYPE}_${groupedBy}`,\n        groupedBy,\n        compoundKey,\n        key,\n        value,\n      });\n      acc.push(...customGroupedRows(\n        childRows,\n        nestedGrouping,\n        getChildGroups,\n        rootRows,\n        `${compoundKey}${GROUP_KEY_SEPARATOR}`,\n      ));\n      return acc;\n    }, []);\n};\n\nexport const customGroupingRowIdGetter = (getRowId, rows) => {\n  const firstRow = rows.find(row => !row[GRID_GROUP_CHECK]);\n  if (!firstRow || getRowId(firstRow)) {\n    return getRowId;\n  }\n  const map = new Map(rows\n    .filter(row => !row[GRID_GROUP_CHECK])\n    .map((row, rowIndex) => [row, rowIndex]));\n\n  return row => map.get(row);\n};\n","export const groupingPanelItems = (columns, grouping) =>\n  grouping.map(({ columnName, draft }) => {\n    const column = columns.find(c => c.name === columnName);\n    return {\n      column,\n      draft,\n    };\n  });\n","export const setCurrentPage = (prevPage, page) => page;\nexport const setPageSize = (prevPageSize, size) => size;\n","const PAGE_HEADERS_OVERFLOW_ERROR =\n  'Max row level exceeds the page size. Consider increasing the page size.';\n\nexport const paginatedRows = (rows, pageSize, page) => (\n  pageSize ?\n    rows.slice(pageSize * page, pageSize * (page + 1)) :\n    rows\n);\n\nexport const rowsWithPageHeaders = (rows, pageSize, getRowLevelKey) => {\n  if (!pageSize || !getRowLevelKey) return rows;\n\n  let result = rows.slice();\n\n  let headerRows = [];\n  let currentIndex = 0;\n  while (result.length > currentIndex) {\n    const row = result[currentIndex];\n    const levelKey = getRowLevelKey(row);\n    if (levelKey) {\n      const headerIndex = headerRows.findIndex(headerRow => getRowLevelKey(headerRow) === levelKey);\n      if (headerIndex === -1) {\n        headerRows = [...headerRows, row];\n      } else {\n        headerRows = [...headerRows.slice(0, headerIndex), row];\n      }\n      if (headerRows.length >= pageSize) {\n        throw new Error(PAGE_HEADERS_OVERFLOW_ERROR);\n      }\n    }\n    const indexInPage = currentIndex % pageSize;\n    if (indexInPage < headerRows.length && row !== headerRows[indexInPage]) {\n      result = [\n        ...result.slice(0, currentIndex),\n        headerRows[indexInPage],\n        ...result.slice(currentIndex),\n      ];\n    }\n    currentIndex += 1;\n  }\n\n  return result;\n};\n\nexport const pageCount = (count, pageSize) => (\n  pageSize ? Math.ceil(count / pageSize) : 1\n);\n\nexport const rowCount = rows => rows.length;\n","export const firstRowOnPage = (currentPage, pageSize, totalCount) => {\n  if (totalCount === 0) {\n    return 0;\n  }\n  return pageSize ? (currentPage * pageSize) + 1 : 1;\n};\n\nexport const lastRowOnPage = (currentPage, pageSize, totalRowCount) => {\n  let result = totalRowCount;\n  if (pageSize) {\n    const index = (currentPage + 1) * pageSize;\n    result = index > totalRowCount ? totalRowCount : index;\n  }\n\n  return result;\n};\n","const setRowSelection = (selection, { rowId, selected }) => {\n  const selectedRows = Array.from(selection);\n  const selectedIndex = selectedRows.indexOf(rowId);\n\n  let isRowSelected = selected;\n\n  if (isRowSelected === undefined) {\n    isRowSelected = selectedIndex === -1;\n  }\n\n  if (selectedIndex > -1 && !isRowSelected) {\n    selectedRows.splice(selectedIndex, 1);\n  } else if (selectedIndex === -1 && isRowSelected) {\n    selectedRows.push(rowId);\n  }\n\n  return selectedRows;\n};\n\nexport const setRowsSelection = (selection, { rowIds, selected }) => {\n  if (rowIds.length === 1) {\n    return setRowSelection(selection, { rowId: rowIds[0], selected });\n  }\n\n  const rowIdsSet = new Set(rowIds);\n\n  let isRowsSelected = selected;\n  if (isRowsSelected === undefined) {\n    const availableSelection = selection.filter(rowId => rowIdsSet.has(rowId));\n    isRowsSelected = availableSelection.length !== rowIdsSet.size;\n  }\n\n  if (isRowsSelected) {\n    const selectionSet = new Set(selection);\n    return [\n      ...selection,\n      ...rowIds.filter(rowId => !selectionSet.has(rowId)),\n    ];\n  }\n\n  return selection.filter(rowId => !rowIdsSet.has(rowId));\n};\n","export const getAvailableToSelect = (rows, getRowId, isGroupRow) => {\n  let dataRows = rows;\n  if (isGroupRow) {\n    dataRows = dataRows.filter(row => !isGroupRow(row));\n  }\n  return dataRows.map(row => getRowId(row));\n};\n\nexport const getAvailableSelection = (selection, availableToSelect) => {\n  const availableToSelectSet = new Set(availableToSelect);\n  return selection.filter(selected => availableToSelectSet.has(selected));\n};\n","export const startEditRows = (prevEditingRows, { rowIds }) =>\n  [...prevEditingRows, ...rowIds];\n\nexport const stopEditRows = (prevEditingRows, { rowIds }) => {\n  const rowIdSet = new Set(rowIds);\n  return prevEditingRows.filter(id => !rowIdSet.has(id));\n};\n\nexport const addRow = (addedRows, { row }) => [...addedRows, row];\n\nexport const changeAddedRow = (addedRows, { rowId, change }) => {\n  const result = Array.from(addedRows);\n  result[rowId] = { ...result[rowId], ...change };\n  return result;\n};\n\nexport const cancelAddedRows = (addedRows, { rowIds }) => {\n  const result = [];\n  const indexSet = new Set(rowIds);\n  addedRows.forEach((row, index) => {\n    if (!indexSet.has(index)) {\n      result.push(row);\n    }\n  });\n  return result;\n};\n\nexport const changeRow = (prevChangedRows, { rowId, change }) => {\n  const prevChange = prevChangedRows[rowId] || {};\n  return {\n    ...prevChangedRows,\n    [rowId]: {\n      ...prevChange,\n      ...change,\n    },\n  };\n};\n\nexport const cancelChanges = (prevChangedRows, { rowIds }) => {\n  const result = { ...prevChangedRows };\n  rowIds.forEach((rowId) => {\n    delete result[rowId];\n  });\n  return result;\n};\n\nexport const deleteRows = (deletedRows, { rowIds }) => [...deletedRows, ...rowIds];\n\nexport const cancelDeletedRows = (deletedRows, { rowIds }) => {\n  const rowIdSet = new Set(rowIds);\n  return deletedRows.filter(rowId => !rowIdSet.has(rowId));\n};\n","export const changedRowsByIds = (changes, rowIds) => {\n  const result = {};\n  rowIds.forEach((rowId) => {\n    result[rowId] = changes[rowId];\n  });\n  return result;\n};\n\nexport const addedRowsByIds = (addedRows, rowIds) => {\n  const rowIdSet = new Set(rowIds);\n  const result = [];\n  addedRows.forEach((row, index) => {\n    if (rowIdSet.has(index)) {\n      result.push(row);\n    }\n  });\n  return result;\n};\n\nexport const computedCreateRowChange = (columns) => {\n  const map = columns.reduce((acc, column) => {\n    if (column.createRowChange) {\n      acc[column.name] = column.createRowChange;\n    }\n    return acc;\n  }, {});\n\n  return (row, columnName, value) =>\n    (map[columnName] ? map[columnName](row, value, columnName) : { [columnName]: value });\n};\n","export const getRowChange = (changedRows, rowId) => changedRows[rowId] || {};\n","export const TABLE_REORDERING_TYPE = 'reordering';\n","export const changeColumnOrder = (order, { sourceColumnName, targetColumnName }) => {\n  const sourceColumnIndex = order.indexOf(sourceColumnName);\n  const targetColumnIndex = order.indexOf(targetColumnName);\n  const newOrder = Array.from(order);\n\n  newOrder.splice(sourceColumnIndex, 1);\n  newOrder.splice(targetColumnIndex, 0, sourceColumnName);\n  return newOrder;\n};\n","export const TABLE_DATA_TYPE = 'data';\nexport const TABLE_NODATA_TYPE = 'nodata';\n","import { TABLE_DATA_TYPE } from '../table-view/constants';\nimport { TABLE_REORDERING_TYPE } from './constants';\n\nexport const orderedColumns = (tableColumns, order) => {\n  const result = Array.from(tableColumns);\n\n  result.sort((a, b) => {\n    if (a.type !== TABLE_DATA_TYPE || b.type !== TABLE_DATA_TYPE) return 0;\n\n    const aPos = order.indexOf(a.column.name);\n    const bPos = order.indexOf(b.column.name);\n    return aPos - bPos;\n  });\n\n  return result;\n};\n\nexport const tableHeaderRowsWithReordering = tableHeaderRows => [\n  {\n    key: TABLE_REORDERING_TYPE,\n    type: TABLE_REORDERING_TYPE,\n    height: 0,\n  },\n  ...tableHeaderRows,\n];\n\nexport const draftOrder = (order, sourceColumnIndex, targetColumnIndex) => {\n  if (sourceColumnIndex === -1\n    || targetColumnIndex === -1\n    || sourceColumnIndex === targetColumnIndex) {\n    return order;\n  }\n\n  const result = order.slice();\n  const sourceColumn = order[sourceColumnIndex];\n  result.splice(sourceColumnIndex, 1);\n  result.splice(targetColumnIndex, 0, sourceColumn);\n\n  return result;\n};\n","const UNSET_COLUMN_WIDTH_ERROR = [\n  'The \"$1\" column\\'s width is not specified.',\n  'The TableColumnResizing plugin requires that all columns have the specified width.',\n].join('\\n');\n\nexport const tableColumnsWithWidths = (tableColumns, columnWidths, draftColumnWidths) =>\n  tableColumns\n    .reduce((acc, tableColumn) => {\n      if (tableColumn.type === 'data') {\n        const columnName = tableColumn.column.name;\n        const width = draftColumnWidths[columnName] || columnWidths[columnName];\n        if (width === undefined) {\n          throw new Error(UNSET_COLUMN_WIDTH_ERROR.replace('$1', columnName));\n        }\n        acc.push({ ...tableColumn, width });\n      } else {\n        acc.push(tableColumn);\n      }\n      return acc;\n    }, []);\n","const MIN_SIZE = 40;\n\nexport const changeTableColumnWidths = (state, { shifts }) => {\n  const { columnWidths } = state;\n  const updatedColumnWidths = Object.keys(shifts)\n    .reduce((acc, columnName) => {\n      const size = Math.max(MIN_SIZE, columnWidths[columnName] + shifts[columnName]);\n      return Object.assign(acc, { [columnName]: size });\n    }, {});\n  return {\n    ...state,\n    columnWidths: { ...columnWidths, ...updatedColumnWidths },\n    draftColumnWidths: {},\n  };\n};\n\nexport const changeDraftTableColumnWidths = (state, { shifts }) => {\n  const { columnWidths, draftColumnWidths } = state;\n  const updatedDraftColumnWidths = Object.keys(shifts)\n    .reduce((acc, columnName) => {\n      if (shifts[columnName] === null) {\n        delete acc[columnName];\n        return acc;\n      }\n      const size = Math.max(MIN_SIZE, columnWidths[columnName] + shifts[columnName]);\n      return Object.assign(acc, { [columnName]: size });\n    }, Object.assign({}, draftColumnWidths));\n  return {\n    ...state,\n    draftColumnWidths: updatedDraftColumnWidths,\n  };\n};\n","export const TABLE_EDIT_COMMAND_TYPE = 'editCommand';\n","export const TABLE_ADDED_TYPE = 'added';\nexport const TABLE_EDIT_TYPE = 'edit';\n","export const TABLE_HEADING_TYPE = 'heading';\n","import { TABLE_ADDED_TYPE, TABLE_EDIT_TYPE } from '../table-edit-row/constants';\nimport { TABLE_DATA_TYPE } from '../table-view/constants';\nimport { TABLE_HEADING_TYPE } from '../table-header-row/constants';\nimport { TABLE_EDIT_COMMAND_TYPE } from './constants';\n\nexport const isHeadingEditCommandsTableCell = (tableRow, tableColumn) =>\n  tableRow.type === TABLE_HEADING_TYPE && tableColumn.type === TABLE_EDIT_COMMAND_TYPE;\nexport const isEditCommandsTableCell = (tableRow, tableColumn) =>\n  (tableRow.type === TABLE_DATA_TYPE || tableRow.type === TABLE_ADDED_TYPE\n  || tableRow.type === TABLE_EDIT_TYPE) && tableColumn.type === TABLE_EDIT_COMMAND_TYPE;\n","import { TABLE_EDIT_COMMAND_TYPE } from './constants';\n\nexport const tableColumnsWithEditing = (tableColumns, width) =>\n  [{ key: TABLE_EDIT_COMMAND_TYPE, type: TABLE_EDIT_COMMAND_TYPE, width }, ...tableColumns];\n","import { TABLE_ADDED_TYPE, TABLE_EDIT_TYPE } from './constants';\nimport { TABLE_DATA_TYPE } from '../table-view/constants';\n\nexport const isEditTableCell = (tableRow, tableColumn) =>\n  (tableRow.type === TABLE_ADDED_TYPE || tableRow.type === TABLE_EDIT_TYPE)\n  && tableColumn.type === TABLE_DATA_TYPE;\nexport const isAddedTableRow = tableRow =>\n  tableRow.type === TABLE_ADDED_TYPE;\nexport const isEditTableRow = tableRow =>\n  tableRow.type === TABLE_EDIT_TYPE;\n","import { TABLE_ADDED_TYPE, TABLE_EDIT_TYPE } from './constants';\nimport { TABLE_DATA_TYPE } from '../table-view/constants';\n\nexport const tableRowsWithEditing = (tableRows, editingRows, addedRows, rowHeight) => {\n  const rowIds = new Set(editingRows);\n  const editedTableRows = tableRows\n    .map(tableRow => (\n      tableRow.type === TABLE_DATA_TYPE && rowIds.has(tableRow.rowId)\n        ? {\n          ...tableRow,\n          type: TABLE_EDIT_TYPE,\n          height: rowHeight,\n        }\n        : tableRow\n    ));\n\n  const addedTableRows = addedRows\n    .map((row, rowIndex) => ({\n      key: `${TABLE_ADDED_TYPE}_${rowIndex}`,\n      type: TABLE_ADDED_TYPE,\n      rowId: rowIndex,\n      height: rowHeight,\n      row,\n    }));\n\n  return [\n    ...addedTableRows.reverse(),\n    ...editedTableRows,\n  ];\n};\n","export const TABLE_FILTER_TYPE = 'filter';\n","import { TABLE_FILTER_TYPE } from './constants';\nimport { TABLE_DATA_TYPE } from '../table-view/constants';\n\nexport const isFilterTableCell = (tableRow, tableColumn) =>\n  tableRow.type === TABLE_FILTER_TYPE && tableColumn.type === TABLE_DATA_TYPE;\nexport const isFilterTableRow = tableRow => tableRow.type === TABLE_FILTER_TYPE;\n","import { TABLE_FILTER_TYPE } from './constants';\n\nexport const tableHeaderRowsWithFilter = (headerRows, rowHeight) =>\n  [...headerRows, { key: TABLE_FILTER_TYPE, type: TABLE_FILTER_TYPE, height: rowHeight }];\n","export const TABLE_GROUP_TYPE = 'group';\n","import { TABLE_GROUP_TYPE } from './constants';\n\nexport const isGroupTableCell = (tableRow, tableColumn) =>\n  tableRow.type === TABLE_GROUP_TYPE && tableColumn.type === TABLE_GROUP_TYPE\n  && tableRow.row.groupedBy === tableColumn.column.name;\nexport const isGroupIndentTableCell = (tableRow, tableColumn) =>\n  tableRow.type === TABLE_GROUP_TYPE && tableColumn.type === TABLE_GROUP_TYPE\n  && tableRow.row.groupedBy !== tableColumn.column.name;\nexport const isGroupTableRow = tableRow => tableRow.type === TABLE_GROUP_TYPE;\n","import { TABLE_DATA_TYPE } from '../table-view/constants';\nimport { TABLE_GROUP_TYPE } from './constants';\n\nconst tableColumnsWithDraftGrouping = (tableColumns, draftGrouping, showColumnWhenGrouped) =>\n  tableColumns\n    .reduce((acc, tableColumn) => {\n      const isDataColumn = tableColumn.type === TABLE_DATA_TYPE;\n      const tableColumnName = isDataColumn ? tableColumn.column.name : '';\n      const columnDraftGrouping = draftGrouping\n        .find(grouping => grouping.columnName === tableColumnName);\n\n      if (!columnDraftGrouping || showColumnWhenGrouped(tableColumnName)) {\n        return [...acc, tableColumn];\n      } else if (columnDraftGrouping.mode === 'remove' || columnDraftGrouping.mode === 'add') {\n        return [...acc, {\n          ...tableColumn,\n          draft: true,\n        }];\n      }\n      return acc;\n    }, []);\n\nexport const tableColumnsWithGrouping = (\n  tableColumns,\n  grouping,\n  draftGrouping,\n  groupIndentColumnWidth,\n  showColumnWhenGrouped,\n) => [\n  ...grouping.map((columnGrouping) => {\n    const groupedColumn = tableColumns\n      .find(tableColumn =>\n        tableColumn.type === TABLE_DATA_TYPE &&\n        tableColumn.column.name === columnGrouping.columnName)\n      .column;\n    return {\n      key: `${TABLE_GROUP_TYPE}_${groupedColumn.name}`,\n      type: TABLE_GROUP_TYPE,\n      column: groupedColumn,\n      width: groupIndentColumnWidth,\n    };\n  }),\n  ...tableColumnsWithDraftGrouping(tableColumns, draftGrouping, showColumnWhenGrouped),\n];\n\nexport const tableRowsWithGrouping = (tableRows, isGroupRow) =>\n  tableRows.map((tableRow) => {\n    if (tableRow.type !== TABLE_DATA_TYPE || !isGroupRow(tableRow.row)) {\n      return tableRow;\n    }\n    return {\n      ...tableRow,\n      key: `${TABLE_GROUP_TYPE}_${tableRow.row.compoundKey}`,\n      type: TABLE_GROUP_TYPE,\n      colSpanStart: `${TABLE_GROUP_TYPE}_${tableRow.row.groupedBy}`,\n    };\n  });\n","import { TABLE_HEADING_TYPE } from './constants';\nimport { TABLE_DATA_TYPE } from '../table-view/constants';\n\nexport const isHeadingTableCell = (tableRow, tableColumn) =>\n  tableRow.type === TABLE_HEADING_TYPE && tableColumn.type === TABLE_DATA_TYPE;\n\nexport const isHeadingTableRow = tableRow => (tableRow.type === TABLE_HEADING_TYPE);\n","import { TABLE_HEADING_TYPE } from './constants';\n\nexport const tableRowsWithHeading = headerRows =>\n  [{ key: TABLE_HEADING_TYPE, type: TABLE_HEADING_TYPE }, ...headerRows];\n","export const TABLE_DETAIL_TYPE = 'detail';\n","import { TABLE_DETAIL_TYPE } from './constants';\nimport { TABLE_DATA_TYPE } from '../table-view/constants';\n\nexport const isDetailRowExpanded = (expandedRows, rowId) => expandedRows.indexOf(rowId) > -1;\nexport const isDetailToggleTableCell = (tableRow, tableColumn) =>\n  tableColumn.type === TABLE_DETAIL_TYPE && tableRow.type === TABLE_DATA_TYPE;\nexport const isDetailTableRow = tableRow => tableRow.type === TABLE_DETAIL_TYPE;\n","export const setDetailRowExpanded = (prevExpanded, { rowId, isExpanded }) => {\n  const expandedRows = Array.from(prevExpanded);\n  const expandedIndex = expandedRows.indexOf(rowId);\n  const isRowExpanded = isExpanded !== undefined ? isExpanded : expandedIndex === -1;\n\n  if (expandedIndex > -1 && !isRowExpanded) {\n    expandedRows.splice(expandedIndex, 1);\n  } else if (expandedIndex === -1 && isRowExpanded) {\n    expandedRows.push(rowId);\n  }\n\n  return expandedRows;\n};\n","import { TABLE_DETAIL_TYPE } from './constants';\nimport { TABLE_DATA_TYPE } from '../table-view/constants';\n\nexport const tableRowsWithExpandedDetail = (tableRows, expandedRows, rowHeight) => {\n  let result = tableRows;\n  expandedRows\n    .forEach((expandedRowId) => {\n      const rowIndex = result.findIndex(tableRow =>\n        tableRow.type === TABLE_DATA_TYPE && tableRow.rowId === expandedRowId);\n      if (rowIndex === -1) return;\n      const insertIndex = rowIndex + 1;\n      const { row, rowId } = result[rowIndex];\n      result = [\n        ...result.slice(0, insertIndex),\n        {\n          key: `${TABLE_DETAIL_TYPE}_${rowId}`,\n          type: TABLE_DETAIL_TYPE,\n          rowId,\n          row,\n          colSpanStart: 0,\n          height: rowHeight,\n        },\n        ...result.slice(insertIndex),\n      ];\n    });\n  return result;\n};\n\nexport const tableColumnsWithDetail = (tableColumns, detailToggleCellWidth) => [\n  { key: TABLE_DETAIL_TYPE, type: TABLE_DETAIL_TYPE, width: detailToggleCellWidth },\n  ...tableColumns,\n];\n","export const TABLE_SELECT_TYPE = 'select';\n","import { TABLE_SELECT_TYPE } from './constants';\nimport { TABLE_DATA_TYPE } from '../table-view/constants';\nimport { TABLE_HEADING_TYPE } from '../table-header-row/constants';\n\nexport const isSelectTableCell = (tableRow, tableColumn) =>\n  tableColumn.type === TABLE_SELECT_TYPE && tableRow.type === TABLE_DATA_TYPE;\nexport const isSelectAllTableCell = (tableRow, tableColumn) =>\n  tableColumn.type === TABLE_SELECT_TYPE && tableRow.type === TABLE_HEADING_TYPE;\n","import { TABLE_SELECT_TYPE } from './constants';\n\nexport const tableColumnsWithSelection = (tableColumns, selectionColumnWidth) => [\n  { key: TABLE_SELECT_TYPE, type: TABLE_SELECT_TYPE, width: selectionColumnWidth },\n  ...tableColumns,\n];\n","import { TABLE_DATA_TYPE, TABLE_NODATA_TYPE } from './constants';\n\nexport const isNoDataTableRow = tableRow => tableRow.type === TABLE_NODATA_TYPE;\nexport const isDataTableCell = (tableRow, tableColumn) =>\n  tableRow.type === TABLE_DATA_TYPE && tableColumn.type === TABLE_DATA_TYPE;\nexport const isHeaderStubTableCell = (tableRow, headerRows) => headerRows.indexOf(tableRow) > -1;\nexport const isDataTableRow = tableRow => tableRow.type === TABLE_DATA_TYPE;\n","import { TABLE_DATA_TYPE, TABLE_NODATA_TYPE } from './constants';\n\nexport const tableColumnsWithDataRows = columns =>\n  columns.map(column => ({\n    key: `${TABLE_DATA_TYPE}_${column.name}`,\n    type: TABLE_DATA_TYPE,\n    width: column.width,\n    column,\n  }));\n\nexport const tableRowsWithDataRows = (rows, getRowId) => (\n  !rows.length\n    ? [{ key: TABLE_NODATA_TYPE, type: TABLE_NODATA_TYPE, colSpanStart: 0 }]\n    : rows.map((row) => {\n      const rowId = getRowId(row);\n      return {\n        row,\n        rowId,\n        type: TABLE_DATA_TYPE,\n        key: `${TABLE_DATA_TYPE}_${rowId}`,\n      };\n    }));\n","export const visibleTableColumns = (tableColumns, hiddenColumns) =>\n  tableColumns.filter(tableColumn => hiddenColumns.indexOf(tableColumn.column.name) === -1);\n","export const columnChooserItems = (columns, hiddenColumns) =>\n  columns.map(column => ({ column, hidden: hiddenColumns.indexOf(column.name) !== -1 }));\n","export const toggleColumn = (hiddenColumns, columnName) => (\n  hiddenColumns.indexOf(columnName) === -1\n    ? [...hiddenColumns, columnName]\n    : hiddenColumns.filter(hiddenColumn => hiddenColumn !== columnName)\n);\n","export const getTargetColumnGeometries = (columnGeometries, sourceIndex) => {\n  const sourceWidth = columnGeometries[sourceIndex].right - columnGeometries[sourceIndex].left;\n  const getWidthDifference = index =>\n    columnGeometries[index].right - columnGeometries[index].left - sourceWidth;\n\n  return columnGeometries\n    .map(({\n      top, right, bottom, left,\n    }, targetIndex) => {\n      let leftBorder = left;\n      if (targetIndex > 0 && targetIndex <= sourceIndex) {\n        leftBorder = Math.min(leftBorder, leftBorder - getWidthDifference(targetIndex - 1));\n      }\n      if (targetIndex > sourceIndex) {\n        leftBorder = Math.max(leftBorder, leftBorder + getWidthDifference(targetIndex));\n      }\n      let rightBorder = right;\n      if (targetIndex < columnGeometries.length - 1 && targetIndex >= sourceIndex) {\n        rightBorder = Math.max(rightBorder, rightBorder + getWidthDifference(targetIndex + 1));\n      }\n      if (targetIndex < sourceIndex) {\n        rightBorder = Math.min(rightBorder, rightBorder - getWidthDifference(targetIndex));\n      }\n\n      return {\n        top,\n        right: rightBorder,\n        bottom,\n        left: leftBorder,\n      };\n    });\n};\n","import { easeOutCubic } from '@devexpress/dx-core';\nimport { getTargetColumnGeometries } from './column-geometries';\n\nexport const getTableRowColumnsWithColSpan = (tableColumns, colSpanStart) => {\n  if (colSpanStart === undefined) return tableColumns;\n\n  let span = false;\n  return tableColumns\n    .reduce((acc, tableColumn, columnIndex) => {\n      if (span) return acc;\n      if (columnIndex === colSpanStart || tableColumn.key === colSpanStart) {\n        span = true;\n        return [...acc, { ...tableColumn, colSpan: tableColumns.length - columnIndex }];\n      }\n      return [...acc, tableColumn];\n    }, []);\n};\n\nexport const getTableColumnGeometries = (columns, tableWidth) => {\n  const columnWidths = columns\n    .map(column => column.width);\n\n  const freeSpace = tableWidth;\n  const restrictedSpace = columnWidths\n    .reduce((accum, width) => accum + (width || 0), 0);\n  const freeSpacePortions = columnWidths\n    .reduce((accum, width) => accum + (width === undefined ? 1 : 0), 0);\n  const freeSpacePortion = (freeSpace - restrictedSpace) / freeSpacePortions;\n\n  let lastRightPosition = 0;\n  return columnWidths\n    .map(width => (width === undefined ? freeSpacePortion : width))\n    .map((width) => {\n      lastRightPosition += width;\n      return {\n        left: lastRightPosition - width,\n        right: lastRightPosition,\n      };\n    });\n};\n\nexport const getTableTargetColumnIndex = (columnGeometries, sourceIndex, offset) =>\n  getTargetColumnGeometries(columnGeometries, sourceIndex)\n    .findIndex(({ left, right }) => offset > left && offset < right);\n\n\nconst ANIMATION_DURATION = 200;\n\nconst getAnimationProgress = animation =>\n  (new Date().getTime() - animation.startTime) / ANIMATION_DURATION;\n\nexport const getAnimations = (\n  prevColumns,\n  nextColumns,\n  tableWidth,\n  prevAnimations,\n) => {\n  const prevColumnGeometries = new Map(getTableColumnGeometries(prevColumns, tableWidth)\n    .map((geometry, index) => [prevColumns[index].key, geometry])\n    .map(([key, geometry]) => {\n      const animation = prevAnimations.get(key);\n      if (!animation) return [key, geometry];\n      const progress = easeOutCubic(getAnimationProgress(animation));\n      const left = ((animation.left.to - animation.left.from) * progress) + animation.left.from;\n      return [key, {\n        left,\n        right: geometry.right - (geometry.left - left),\n      }];\n    }));\n\n  const nextColumnGeometries = new Map(getTableColumnGeometries(nextColumns, tableWidth)\n    .map((geometry, index) => [nextColumns[index].key, geometry]));\n\n  return new Map([...nextColumnGeometries.keys()]\n    .map((key) => {\n      const prev = prevColumnGeometries.get(key);\n      const next = nextColumnGeometries.get(key);\n\n      const result = { startTime: new Date().getTime(), style: {} };\n      if (Math.abs(prev.left - next.left) > 1) {\n        result.left = { from: prev.left, to: next.left };\n      }\n      return [key, result];\n    })\n    .filter(animation => animation[1].left));\n};\n\nexport const filterActiveAnimations = animations => new Map([...animations.entries()]\n  .filter(([, animation]) => getAnimationProgress(animation) < 1));\n\nexport const evalAnimations = animations => new Map([...animations.entries()]\n  .map(([key, animation]) => {\n    const progress = easeOutCubic(getAnimationProgress(animation));\n    const result = { ...animation.style };\n    if (animation.left) {\n      const offset = (animation.left.to - animation.left.from) * (progress - 1);\n      result.transform = `translateX(${offset}px)`;\n    }\n    return [key, result];\n  }));\n","import { getTargetColumnGeometries } from './column-geometries';\n\nconst isOnTheSameLine = (geometry, y) => y >= geometry.top && y <= geometry.bottom;\n\nexport const getGroupCellTargetIndex = (geometries, sourceIndex, { x, y }) => {\n  if (geometries.length === 0) return 0;\n\n  const targetGeometries = sourceIndex !== -1\n    ? getTargetColumnGeometries(geometries, sourceIndex)\n    : geometries;\n\n  const targetIndex = targetGeometries.findIndex((geometry, index) => {\n    const inVerticalBounds = isOnTheSameLine(geometry, y);\n    const inHorizontalBounds = x >= geometry.left && x <= geometry.right;\n    const shouldGoFirst = index === 0 && x < geometry.left;\n    const shouldGoOnLineBreak = !inVerticalBounds &&\n      !!geometries[index - 1] &&\n      isOnTheSameLine(geometries[index - 1], y);\n\n    return (inVerticalBounds && inHorizontalBounds) ||\n      shouldGoFirst ||\n      shouldGoOnLineBreak;\n  });\n\n  return targetIndex === -1 ? geometries.length : targetIndex;\n};\n","const processPattern = (pattern, params) =>\n  Object.keys(params).reduce(\n    (msg, key) =>\n      msg.replace(`{${key}}`, params[key]),\n    pattern,\n  );\n\nexport const getMessagesFormatter = messages => (key, params) => {\n  const message = messages[key];\n\n  if (typeof message === 'function') {\n    return message(params);\n  }\n  if (params) {\n    return processPattern(message, params);\n  }\n  return message;\n};\n"],"names":["rowIdGetter","getRowId","rows","map","Map","row","rowIndex","get","cellValueGetter","getCellValue","columns","useFastAccessor","reduce","acc","column","name","columnName","setColumnSorting","state","direction","keepOther","cancel","sortIndex","sorting","nextSorting","Array","from","slice","isArray","filter","indexOf","columnSorting","columnSortingIndex","findIndex","newColumnSorting","splice","newIndexFallback","length","newIndex","undefined","getColumnSortingDirection","s","merge","array","auxiliary","lo","mid","hi","compare","i","j","k","cmp","sortArrayToAuxiliary","Math","floor","sortAuxiliaryToArray","a","b","result","NODE_CHECK","Symbol","rowsToTree","getRowLevelKey","levels","children","forEach","levelKey","levelIndex","level","root","node","push","treeToRows","tree","defaultCompare","createCompare","getColumnCompare","getComparableValue","reverse","prevCompare","inverse","columnCompare","aRow","bRow","sortTree","sortedTree","mergeSort","sortHierarchicalRows","sortedRows","isGroupRow","groupedBy","value","setColumnFilter","filters","config","filterIndex","f","nextState","getColumnFilterConfig","_","toLowerCase","String","defaultPredicate","filterTree","predicate","filteredChildren","filterHierarchicalRows","filteredTree","collapsedRows","filteredRows","getColumnPredicate","prevPredicate","filterConfig","customPredicate","columnPredicate","GROUP_KEY_SEPARATOR","groupByColumn","groupIndex","grouping","groupingIndex","g","targetIndex","ungroupedColumnIndex","group","index","filteredExpandedGroups","expandedGroups","split","toggleExpandedGroups","groupKey","groupKeyIndex","draftGroupingChange","groupingChange","cancelGroupingChange","draftGrouping","draft","mode","GRID_GROUP_TYPE","GRID_GROUP_CHECK","GRID_GROUP_LEVEL_KEY","groupRowChecker","groupRowLevelKeyGetter","defaultColumnIdentity","groupedRows","getColumnIdentity","keyPrefix","groupIdentity","groups","key","sameKeyItems","set","nestedGrouping","values","items","compoundKey","expandedGroupRows","groupingColumnNames","columnGrouping","currentGroupExpanded","currentGroupLevel","groupLevel","has","customGroupedRows","currentRows","getChildGroups","rootRows","childRows","customGroupingRowIdGetter","firstRow","find","groupingPanelItems","c","setCurrentPage","prevPage","page","setPageSize","prevPageSize","size","PAGE_HEADERS_OVERFLOW_ERROR","paginatedRows","pageSize","rowsWithPageHeaders","headerRows","currentIndex","headerIndex","headerRow","Error","indexInPage","pageCount","count","ceil","rowCount","firstRowOnPage","currentPage","totalCount","lastRowOnPage","totalRowCount","setRowSelection","selection","rowId","selected","selectedRows","selectedIndex","isRowSelected","setRowsSelection","rowIds","rowIdsSet","Set","isRowsSelected","availableSelection","selectionSet","getAvailableToSelect","dataRows","getAvailableSelection","availableToSelect","availableToSelectSet","startEditRows","prevEditingRows","stopEditRows","rowIdSet","id","addRow","addedRows","changeAddedRow","change","cancelAddedRows","indexSet","changeRow","prevChangedRows","prevChange","cancelChanges","deleteRows","deletedRows","cancelDeletedRows","changedRowsByIds","changes","addedRowsByIds","computedCreateRowChange","createRowChange","getRowChange","changedRows","TABLE_REORDERING_TYPE","changeColumnOrder","order","sourceColumnName","targetColumnName","sourceColumnIndex","targetColumnIndex","newOrder","TABLE_DATA_TYPE","TABLE_NODATA_TYPE","orderedColumns","tableColumns","sort","type","aPos","bPos","tableHeaderRowsWithReordering","tableHeaderRows","draftOrder","sourceColumn","UNSET_COLUMN_WIDTH_ERROR","join","tableColumnsWithWidths","columnWidths","draftColumnWidths","tableColumn","width","replace","MIN_SIZE","changeTableColumnWidths","shifts","updatedColumnWidths","Object","keys","max","assign","changeDraftTableColumnWidths","updatedDraftColumnWidths","TABLE_EDIT_COMMAND_TYPE","TABLE_ADDED_TYPE","TABLE_EDIT_TYPE","TABLE_HEADING_TYPE","isHeadingEditCommandsTableCell","tableRow","isEditCommandsTableCell","tableColumnsWithEditing","isEditTableCell","isAddedTableRow","isEditTableRow","tableRowsWithEditing","tableRows","editingRows","rowHeight","editedTableRows","addedTableRows","TABLE_FILTER_TYPE","isFilterTableCell","isFilterTableRow","tableHeaderRowsWithFilter","height","TABLE_GROUP_TYPE","isGroupTableCell","isGroupIndentTableCell","isGroupTableRow","tableColumnsWithDraftGrouping","showColumnWhenGrouped","isDataColumn","tableColumnName","columnDraftGrouping","tableColumnsWithGrouping","groupIndentColumnWidth","groupedColumn","tableRowsWithGrouping","isHeadingTableCell","isHeadingTableRow","tableRowsWithHeading","TABLE_DETAIL_TYPE","isDetailRowExpanded","expandedRows","isDetailToggleTableCell","isDetailTableRow","setDetailRowExpanded","prevExpanded","isExpanded","expandedIndex","isRowExpanded","tableRowsWithExpandedDetail","expandedRowId","insertIndex","tableColumnsWithDetail","detailToggleCellWidth","TABLE_SELECT_TYPE","isSelectTableCell","isSelectAllTableCell","tableColumnsWithSelection","selectionColumnWidth","isNoDataTableRow","isDataTableCell","isHeaderStubTableCell","isDataTableRow","tableColumnsWithDataRows","tableRowsWithDataRows","colSpanStart","visibleTableColumns","hiddenColumns","columnChooserItems","hidden","toggleColumn","hiddenColumn","getTargetColumnGeometries","columnGeometries","sourceIndex","sourceWidth","right","left","getWidthDifference","top","bottom","leftBorder","min","rightBorder","getTableRowColumnsWithColSpan","span","columnIndex","colSpan","getTableColumnGeometries","tableWidth","freeSpace","restrictedSpace","accum","freeSpacePortions","freeSpacePortion","lastRightPosition","getTableTargetColumnIndex","offset","ANIMATION_DURATION","getAnimationProgress","Date","getTime","animation","startTime","getAnimations","prevColumns","nextColumns","prevAnimations","prevColumnGeometries","geometry","progress","easeOutCubic","to","nextColumnGeometries","prev","next","style","abs","filterActiveAnimations","animations","entries","evalAnimations","transform","isOnTheSameLine","y","getGroupCellTargetIndex","geometries","x","targetGeometries","inVerticalBounds","inHorizontalBounds","shouldGoFirst","shouldGoOnLineBreak","processPattern","pattern","params","msg","getMessagesFormatter","message","messages"],"mappings":"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"}